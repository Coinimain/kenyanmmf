<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Preconnects (reduce DNS/TLS cost on mobile) -->
  <link rel="preconnect" href="https://cdn-cookieyes.com" crossorigin>
  {% unless page.no_ads %}
  <link rel="preconnect" href="https://pagead2.googlesyndication.com" crossorigin>
  <link rel="preconnect" href="https://googleads.g.doubleclick.net" crossorigin>
  <link rel="dns-prefetch" href="//tpc.googlesyndication.com">
  {% endunless %}
  <link rel="dns-prefetch" href="//cdn-cookieyes.com">

  <!-- Content Security Policy -->
  {% unless page.no_ads %}
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    base-uri 'self';
    object-src 'none';
    frame-ancestors 'self';
    form-action 'self' https://formspree.io;

    img-src 'self' data: https:;
    style-src 'self' 'unsafe-inline';
    font-src 'self' data: https:;

    script-src
      'self'
      'unsafe-inline'
      https://cdn.jsdelivr.net
      https://cdn-cookieyes.com
      https://pagead2.googlesyndication.com
      https://securepubads.g.doubleclick.net
      https://www.googletagservices.com
      https://tpc.googlesyndication.com
      https://googleads.g.doubleclick.net
      https://www.googletagmanager.com
      https://ep2.adtrafficquality.google;

    connect-src
      'self'
      https://formspree.io
      https://cdn.jsdelivr.net
      https://open.er-api.com
      https://cdn-cookieyes.com
      https://pagead2.googlesyndication.com
      https://securepubads.g.doubleclick.net
      https://googleads.g.doubleclick.net
      https://adservice.google.com
      https://adservice.google.co.ke
      https://www.google-analytics.com
      https://region1.google-analytics.com
      https://analytics.google.com
      https://ep1.adtrafficquality.google
      https://ep2.adtrafficquality.google;

    frame-src
      https://googleads.g.doubleclick.net
      https://tpc.googlesyndication.com
      https://ep2.adtrafficquality.google
      https://www.google.com;

    child-src
      https://googleads.g.doubleclick.net
      https://tpc.googlesyndication.com
      https://ep2.adtrafficquality.google
      https://www.google.com;

    upgrade-insecure-requests;
  " />
  {% endunless %}

  {% if page.no_ads %}
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    base-uri 'self';
    object-src 'none';
    frame-ancestors 'self';
    form-action 'self' https://formspree.io;

    img-src 'self' data: https:;
    style-src 'self' 'unsafe-inline';
    font-src 'self' data: https:;

    script-src
      'self'
      'unsafe-inline'
      https://cdn.jsdelivr.net
      https://cdn-cookieyes.com;

    connect-src
      'self'
      https://formspree.io
      https://cdn.jsdelivr.net
      https://open.er-api.com;

    frame-src 'self';
    child-src 'self';

    upgrade-insecure-requests;
  " />
  {% endif %}

  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="Referrer-Policy" content="no-referrer" />
  <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains" />

  <title>{% if page.title %}{{ page.title }} | {% endif %}Kenya MMF Calculator</title>
  <meta name="description" content="{% if page.description %}{{ page.description }}{% else %}Tools and guides for money market funds and personal finance in Kenya.{% endif %}" />

  <!-- UPDATED ROBOTS -->
  <meta name="robots" content="{{ page.robots | default: 'index, follow' }}, max-image-preview:large" />

  <meta name="theme-color" content="#2E7D32" />

  <link rel="icon" href="{{ '/images/favicon.ico' | relative_url }}" type="image/x-icon" />
  <link rel="canonical" href="https://kenyammfcalculator.co.ke{{ page.url | replace:'index.html','' }}" />

  <!-- Open Graph / Twitter -->
  <meta property="og:site_name" content="Kenya MMF Calculator" />
  <meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}" />
  <meta property="og:title" content="{% if page.title %}{{ page.title }}{% else %}Kenya MMF Calculator{% endif %}" />
  <meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}Tools and guides for money market funds and personal finance in Kenya.{% endif %}" />
  <meta property="og:url" content="https://kenyammfcalculator.co.ke{{ page.url | replace:'index.html','' }}" />

  {% if page.image %}
    <meta property="og:image" content="https://kenyammfcalculator.co.ke{{ page.image | relative_url }}" />
    <meta property="og:image:alt" content="{{ page.image_alt | default: page.title | escape }}" />
  {% endif %}

  <meta name="twitter:card" content="{% if page.image %}summary_large_image{% else %}summary{% endif %}" />
  <meta name="twitter:title" content="{% if page.title %}{{ page.title }}{% else %}Kenya MMF Calculator{% endif %}" />
  <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% else %}Tools and guides for money market funds and personal finance in Kenya.{% endif %}" />

  {% if page.image %}
    <meta name="twitter:image" content="https://kenyammfcalculator.co.ke{{ page.image | relative_url }}" />
  {% endif %}

  <!-- Main CSS (non-blocking load) -->
  <link rel="preload" as="style" href="{{ '/style.css' | relative_url }}?v=20260220">
  <link rel="stylesheet" href="{{ '/style.css' | relative_url }}?v=20260220" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="{{ '/style.css' | relative_url }}?v=20260220"></noscript>

  {% unless page.no_ads %}
    <!-- Keep account meta. We will lazy-load the JS later (big LCP win on mobile) -->
    <meta name="google-adsense-account" content="ca-pub-1110082069590452" />
  {% endunless %}

  <!-- EEAT Disclaimer Schema (loads only on disclaimer page) -->
  {% if page.url == "/disclaimer/" %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Disclaimer",
    "url": "https://kenyammfcalculator.co.ke/disclaimer/",
    "description": "Legal disclaimer and important information for readers of Kenya MMF Calculator.",
    "publisher": {
      "@type": "Organization",
      "name": "Kenya MMF Calculator",
      "url": "https://kenyammfcalculator.co.ke"
    },
    "about": {
      "@type": "Thing",
      "name": "Financial Information Disclaimer"
    },
    "isPartOf": {
      "@type": "WebSite",
      "name": "Kenya MMF Calculator",
      "url": "https://kenyammfcalculator.co.ke"
    }
  }
  </script>
  {% endif %}
</head>

<body>
  {% unless page.layout == 'post' or page.url == '/blog/' or page.url contains '/blog/' %}
    {% include header.html %}
  {% endunless %}

  {{ content }}

  {% include footer.html %}

  {% unless page.layout == 'post' or page.url == '/blog/' or page.url contains '/blog/' %}
    <script src="{{ '/main.js' | relative_url }}" defer></script>
  {% endunless %}

  <script src="{{ '/share.js' | relative_url }}?v=20260214" defer></script>

  <!-- CookieYes banner (moved out of head to avoid render-blocking) -->
  <script
    id="cookieyes"
    src="https://cdn-cookieyes.com/client_data/cde2f292617a9fcc525c14cd/script.js"
    defer>
  </script>

  {% unless page.no_ads %}
  {% if page.layout == 'post' or page.url contains '/blog/' %}
  <!-- AdSense: lazy-load after page load (huge mobile LCP win) -->
  <script>
  (function () {
    var loaded = false;

    function loadAdsense() {
      if (loaded) return;
      loaded = true;

      var s = document.createElement('script');
      s.async = true;
      s.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1110082069590452";
      s.crossOrigin = "anonymous";
      document.head.appendChild(s);

      s.onload = function () {
        try {
          document.querySelectorAll('ins.adsbygoogle').forEach(function () {
            (window.adsbygoogle = window.adsbygoogle || []).push({});
          });
        } catch (e) {}
      };
    }

    window.addEventListener('load', function () {
      // delay on mobile to protect LCP; desktop loads immediately after load
      var isMobile = window.matchMedia && window.matchMedia("(max-width: 768px)").matches;
      setTimeout(loadAdsense, isMobile ? 2500 : 0);
    });
  })();
  </script>
  {% else %}
  <!-- Non-blog pages: load AdSense normally -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1110082069590452" crossorigin="anonymous"></script>
  {% endif %}
  {% endunless %}
</body>
</html>
